<!--
Copyright (c) 2014 The Polymer Project Authors. All rights reserved.
This code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt
The complete set of authors may be found at http://polymer.github.io/AUTHORS.txt
The complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt
Code distributed by Google as part of the polymer project is also
subject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt
-->

<link rel="import" href="../paper-ink/paper-ink.html">

<polymer-element name="paper-calculator-key" on-trackstart="{{cancelKey}}" on-down="{{inkSpill}}" on-up="{{inkEvaporate}}">

  <template>
  
    <link rel="stylesheet" href="../core-layout/core-layout.css">
  
    <style>
    
      :host {
        position: relative;
      }
      
      #keyLabel, .ink-container {
        position: absolute;
        top: 0;
        right: 0;
        bottom: 0;
        left: 0;
      }
      
      #keyLabel.active {
        text-shadow: 1px 1px 2px rgba(0, 0, 0, 0.13);
      }
      
      .ink-center {
        position: relative;
        width: 0;
        height: 0;
      }
      
      paper-ink {
        position: absolute;
        top: -30px;
        left: -30px;
        width: 60px;
        height: 60px;
      }
      
    </style>
  
    <div class="ink-container core-h core-justify-center core-align-center">
      <div class="ink-center">
        <paper-ink id="ink" color="rgba(241, 250, 65, 0.85)" duration="320" on-paper-ink-evaporate-complete="{{resetInk}}"></paper-ink>
      </div>
    </div>
    
    <div id="keyLabel" class="{{active ? 'active' : ''}} core-h core-justify-center core-align-center"></div>
  
  </template>

  <script>
  
    Polymer('paper-calculator-key', {
      
      publish: {
        label: {reflect: true}
      },
      
      labelChanged: function() {
        this.$.keyLabel.innerHTML = this.label;
      },
      
      cancelKey: function(e) {
        e.preventTap();
        this.resetInk();
      },
      
      resetInk: function() {
        this.active = false;
        this.$.ink.reset();
      },
      
      inkSpill: function(e) {
        this.active = true;
        this.$.ink.spill();
      },
      
      inkEvaporate: function() {
        if (this.active) {
          this.$.ink.evaporateAfterSpillCompleted();
        }
      },
      
      inking: function() {
        this.inkSpill();
        this.inkEvaporate();
      }
    
    });
    
  </script>
  
</polymer-element>
